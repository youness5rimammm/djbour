<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car Rental Fleet</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            color: white;
            overflow-x: hidden;
        }

        .fleet-section {
            padding: 60px 20px;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            position: relative;
        }

        .fleet-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="%23333" stroke-width="0.5" opacity="0.3"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.1;
            pointer-events: none;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .fleet-header {
            text-align: left;
            margin-bottom: 50px;
        }

        .fleet-title {
            font-size: 3.5rem;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffffff, #d4af37);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-transform: uppercase;
        }

        .fleet-description {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #cccccc;
            max-width: 600px;
            margin-bottom: 30px;
        }

        .carousel-container {
            position: relative;
            margin-bottom: 40px;
        }

        .scroll-indicator {
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 20px;
            position: relative;
            overflow: hidden;
        }

        .scroll-progress {
            height: 100%;
            background: linear-gradient(90deg, #d4af37, #f4d03f, #d4af37);
            border-radius: 2px;
            transition: width 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            position: relative;
        }

        .scroll-progress::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .carousel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .carousel-title {
            font-size: 1.5rem;
            color: #d4af37;
            font-weight: 600;
        }

        .carousel-controls {
            display: flex;
            gap: 10px;
        }

        .carousel-btn {
            width: 45px;
            height: 45px;
            border: 2px solid #d4af37;
            background: transparent;
            color: #d4af37;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 18px;
        }

        .carousel-btn:hover {
            background: #d4af37;
            color: #1a1a1a;
            transform: scale(1.1);
        }

        .carousel-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .carousel-wrapper {
            overflow: hidden;
            border-radius: 15px;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .carousel-track {
            display: flex;
            transition: transform 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            gap: 20px;
        }

        .car-card {
            min-width: 280px;
            background: linear-gradient(145deg, #2a2a2a, #1e1e1e);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            transition: all 0.4s ease;
            border: 1px solid #333;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .car-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(212, 175, 55, 0.2);
            border-color: #d4af37;
        }

        .car-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            background: #d4af37;
            color: #1a1a1a;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 2;
        }

        .car-image-container {
            height: 200px;
            background: linear-gradient(135deg, #3a3a3a, #2a2a2a);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .car-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .car-card:hover .car-image {
            transform: scale(1.1);
        }

        .car-info {
            padding: 25px;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .car-price {
            font-size: 1.4rem;
            color: #d4af37;
            font-weight: bold;
            margin-bottom: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .car-name {
            font-size: 1.1rem;
            color: white;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .car-features {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .feature-tag {
            background: rgba(212, 175, 55, 0.1);
            color: #d4af37;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .placeholder-image {
            width: 200px;
            height: 120px;
            background: linear-gradient(45deg, #d4af37, #b8941f);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1a1a1a;
            font-weight: bold;
            font-size: 1.1rem;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            pointer-events: none;
        }

        /* Mobile First - Extra Small devices (phones, 576px and down) */
        @media (max-width: 575px) {
            .fleet-section {
                padding: 30px 15px;
            }
            
            .fleet-title {
                font-size: 2rem;
                text-align: center;
                margin-bottom: 15px;
            }
            
            .fleet-description {
                font-size: 1rem;
                text-align: center;
                margin: 0 auto 30px;
            }
            
            .carousel-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .carousel-title {
                font-size: 1.2rem;
            }
            
            .carousel-controls {
                justify-content: center;
            }
            
            .carousel-btn {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
            
            .car-card {
                min-width: 280px;
                margin: 0 5px;
            }
            
            .car-info {
                padding: 20px;
            }
            
            .car-price {
                font-size: 1.2rem;
            }
            
            .car-name {
                font-size: 1rem;
            }
        }

        /* Small devices (landscape phones, 576px and up) */
        @media (min-width: 576px) and (max-width: 767px) {
            .fleet-section {
                padding: 40px 20px;
            }
            
            .fleet-title {
                font-size: 2.3rem;
                text-align: center;
                margin-bottom: 20px;
            }
            
            .fleet-description {
                text-align: center;
                margin: 0 auto 40px;
            }
            
            .carousel-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .carousel-title {
                font-size: 1.3rem;
            }
            
            .carousel-controls {
                justify-content: center;
            }
            
            .car-card {
                min-width: 300px;
            }
        }

        /* Medium devices (tablets, 768px and up) */
        @media (min-width: 768px) and (max-width: 991px) {
            .fleet-section {
                padding: 50px 25px;
            }
            
            .fleet-title {
                font-size: 2.8rem;
            }
            
            .carousel-header {
                margin-bottom: 25px;
            }
            
            .carousel-title {
                font-size: 1.4rem;
            }
            
            .car-card {
                min-width: 320px;
            }
            
            .car-image-container {
                height: 180px;
            }
            
            .placeholder-image {
                width: 180px;
                height: 110px;
            }
        }

        /* Large devices (desktops, 992px and up) */
        @media (min-width: 992px) and (max-width: 1199px) {
            .fleet-section {
                padding: 55px 30px;
            }
            
            .fleet-title {
                font-size: 3.2rem;
            }
            
            .car-card {
                min-width: 300px;
            }
            
            .car-image-container {
                height: 190px;
            }
            
            .placeholder-image {
                width: 190px;
                height: 115px;
            }
        }

        /* Extra large devices (large desktops, 1200px and up) */
        @media (min-width: 1200px) and (max-width: 1399px) {
            .fleet-title {
                font-size: 3.3rem;
            }
            
            .car-card {
                min-width: 285px;
            }
        }

        /* XXL devices (larger desktops, 1400px and up) */
        @media (min-width: 1400px) {
            .fleet-title {
                font-size: 3.5rem;
            }
            
            .car-card {
                min-width: 280px;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .car-card:hover {
                transform: none;
                box-shadow: none;
                border-color: #333;
            }
            
            .car-card:active {
                transform: translateY(-5px);
                box-shadow: 0 10px 20px rgba(212, 175, 55, 0.2);
                border-color: #d4af37;
            }
            
            .carousel-btn:hover {
                background: transparent;
                color: #d4af37;
                transform: none;
            }
            
            .carousel-btn:active {
                background: #d4af37;
                color: #1a1a1a;
                transform: scale(0.95);
            }
            
            .carousel-wrapper {
                overflow-x: auto;
                overflow-y: hidden;
                scroll-snap-type: x mandatory;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            .carousel-wrapper::-webkit-scrollbar {
                display: none;
            }
            
            .car-card {
                scroll-snap-align: start;
                flex-shrink: 0;
            }
        }

        /* High DPI displays */
        @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
            .placeholder-image {
                font-size: 1rem;
            }
        }

        /* Landscape orientation for mobile */
        @media (max-width: 767px) and (orientation: landscape) {
            .fleet-section {
                padding: 20px 15px;
            }
            
            .fleet-title {
                font-size: 1.8rem;
                margin-bottom: 10px;
            }
            
            .fleet-description {
                font-size: 0.9rem;
                margin-bottom: 20px;
            }
            
            .car-image-container {
                height: 160px;
            }
            
            .placeholder-image {
                width: 160px;
                height: 100px;
                font-size: 0.9rem;
            }
        }

        /* Print styles */
        @media print {
            .fleet-section {
                background: white !important;
                color: black !important;
            }
            
            .carousel-controls {
                display: none !important;
            }
            
            .scroll-indicator {
                display: none !important;
            }
            
            .car-card {
                break-inside: avoid;
                page-break-inside: avoid;
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .car-card {
            animation: fadeInUp 0.6s ease forwards;
        }
    </style>
</head>
<body>
    <section class="fleet-section">
        <div class="container">
            <div class="fleet-header">
                <h1 class="fleet-title">Our Fleet</h1>
                <p class="fleet-description">
                    We have a diverse fleet of rental cars, carefully selected to meet your travel needs. From the perfect compact car for the city to the spacious SUV for family getaways, we've got you covered. With New Car you can rent the perfect car for every occasion.
                </p>
            </div>

            <!-- First Carousel -->
            <div class="carousel-container">
                <div class="carousel-header">
                    <h3 class="carousel-title">Economy & Compact Cars</h3>
                    <div class="carousel-controls">
                        <button class="carousel-btn" onclick="scrollCarousel('carousel1', -1)">‹</button>
                        <button class="carousel-btn" onclick="scrollCarousel('carousel1', 1)">›</button>
                    </div>
                </div>
                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carousel1">
                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">FIAT 500 X</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 22000 DZD /Day</div>
                                <div class="car-name">FIAT 500 X</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Manual</span>
                                    <span class="feature-tag">AC</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">FIAT TIPO</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 12000 DZD /Day</div>
                                <div class="car-name">FIAT TIPO</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Manual</span>
                                    <span class="feature-tag">AC</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">DACIA LOGAN</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 8,000 DZD /Day</div>
                                <div class="car-name">DACIA LOGAN 7 PLACES</div>
                                <div class="car-features">
                                    <span class="feature-tag">7 Seats</span>
                                    <span class="feature-tag">Manual</span>
                                    <span class="feature-tag">AC</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">RENAULT STEPWAY</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 12000 DZD /Day</div>
                                <div class="car-name">RENAULT STEPWAY</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Manual</span>
                                    <span class="feature-tag">AC</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">SKODA</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 12000 DZD /Day</div>
                                <div class="car-name">SKODA</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Automatic</span>
                                    <span class="feature-tag">AC</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="scroll-indicator">
                    <div class="scroll-progress" id="progress1"></div>
                </div>
            </div>

            <!-- Second Carousel -->
            <div class="carousel-container">
                <div class="carousel-header">
                    <h3 class="carousel-title">Premium & Luxury Cars</h3>
                    <div class="carousel-controls">
                        <button class="carousel-btn" onclick="scrollCarousel('carousel2', -1)">‹</button>
                        <button class="carousel-btn" onclick="scrollCarousel('carousel2', 1)">›</button>
                    </div>
                </div>
                <div class="carousel-wrapper">
                    <div class="carousel-track" id="carousel2">
                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">AUDI</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 40,000 DZD /Day</div>
                                <div class="car-name">AUDI</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Automatic</span>
                                    <span class="feature-tag">Luxury</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">LAND ROVER</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 35,000 DZD /Day</div>
                                <div class="car-name">LAND ROVER FREELANDER</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">4WD</span>
                                    <span class="feature-tag">SUV</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">PORSCHE</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 50,000 DZD /Day</div>
                                <div class="car-name">PORSCHE CAYENNE</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Sport</span>
                                    <span class="feature-tag">Premium</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">MERCEDES GLC</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 45,000 DZD /Day</div>
                                <div class="car-name">MERCEDES GLC WITH DRIVER</div>
                                <div class="car-features">
                                    <span class="feature-tag">5 Seats</span>
                                    <span class="feature-tag">Driver</span>
                                    <span class="feature-tag">Luxury</span>
                                </div>
                            </div>
                        </div>

                        <div class="car-card">
                            <div class="car-badge">NEW</div>
                            <div class="car-image-container">
                                <div class="placeholder-image">LIMOUSINE</div>
                            </div>
                            <div class="car-info">
                                <div class="car-price">FROM 60,000 DZD /Day</div>
                                <div class="car-name">LIMOUSINE WITH DRIVER</div>
                                <div class="car-features">
                                    <span class="feature-tag">8+ Seats</span>
                                    <span class="feature-tag">Driver</span>
                                    <span class="feature-tag">VIP</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="scroll-indicator">
                    <div class="scroll-progress" id="progress2"></div>
                </div>
            </div>
        </div>
    </section>

    <script>
        const carouselStates = {
            carousel1: { currentIndex: 0, cardsVisible: 4 },
            carousel2: { currentIndex: 0, cardsVisible: 4 }
        };

        function updateCardsVisible() {
            const screenWidth = window.innerWidth;
            if (screenWidth < 576) {
                carouselStates.carousel1.cardsVisible = 1;
                carouselStates.carousel2.cardsVisible = 1;
            } else if (screenWidth < 768) {
                carouselStates.carousel1.cardsVisible = 1;
                carouselStates.carousel2.cardsVisible = 1;
            } else if (screenWidth < 992) {
                carouselStates.carousel1.cardsVisible = 2;
                carouselStates.carousel2.cardsVisible = 2;
            } else if (screenWidth < 1200) {
                carouselStates.carousel1.cardsVisible = 3;
                carouselStates.carousel2.cardsVisible = 3;
            } else if (screenWidth < 1400) {
                carouselStates.carousel1.cardsVisible = 4;
                carouselStates.carousel2.cardsVisible = 4;
            } else {
                carouselStates.carousel1.cardsVisible = 4;
                carouselStates.carousel2.cardsVisible = 4;
            }
        }

        function scrollCarousel(carouselId, direction) {
            const carousel = document.getElementById(carouselId);
            const cards = carousel.children;
            const state = carouselStates[carouselId];
            
            state.currentIndex += direction;
            
            const maxIndex = Math.max(0, cards.length - state.cardsVisible);
            state.currentIndex = Math.max(0, Math.min(state.currentIndex, maxIndex));
            
            const cardWidth = cards[0].offsetWidth + 20; // including gap
            const translateX = -state.currentIndex * cardWidth;
            
            carousel.style.transform = `translateX(${translateX}px)`;
            
            updateNavigationButtons(carouselId);
        }

        function updateNavigationButtons(carouselId) {
            const carousel = document.getElementById(carouselId);
            const cards = carousel.children;
            const state = carouselStates[carouselId];
            const controls = carousel.closest('.carousel-container').querySelector('.carousel-controls');
            const prevBtn = controls.children[0];
            const nextBtn = controls.children[1];
            
            prevBtn.disabled = state.currentIndex === 0;
            nextBtn.disabled = state.currentIndex >= cards.length - state.cardsVisible;
            
            updateScrollIndicator(carouselId);
        }

        function updateScrollIndicator(carouselId) {
            const carousel = document.getElementById(carouselId);
            const cards = carousel.children;
            const state = carouselStates[carouselId];
            const progressBar = document.getElementById(carouselId === 'carousel1' ? 'progress1' : 'progress2');
            
            const maxIndex = Math.max(0, cards.length - state.cardsVisible);
            const progressPercentage = maxIndex > 0 ? (state.currentIndex / maxIndex) * 100 : 100;
            
            progressBar.style.width = progressPercentage + '%';
        }

        // Initialize
        window.addEventListener('load', () => {
            updateCardsVisible();
            updateNavigationButtons('carousel1');
            updateNavigationButtons('carousel2');
            updateScrollIndicator('carousel1');
            updateScrollIndicator('carousel2');
        });

        window.addEventListener('resize', () => {
            updateCardsVisible();
            // Reset positions on resize
            carouselStates.carousel1.currentIndex = 0;
            carouselStates.carousel2.currentIndex = 0;
            document.getElementById('carousel1').style.transform = 'translateX(0)';
            document.getElementById('carousel2').style.transform = 'translateX(0)';
            updateNavigationButtons('carousel1');
            updateNavigationButtons('carousel2');
        });

        // Add smooth scrolling for mobile and touch events
        const carousels = document.querySelectorAll('.carousel-wrapper');
        carousels.forEach((wrapper, index) => {
            let isDown = false;
            let startX;
            let scrollLeft;
            let startTime;
            let velocity = 0;
            const carouselId = index === 0 ? 'carousel1' : 'carousel2';

            // Function to update scroll indicator based on actual scroll position
            function updateScrollIndicatorFromScroll() {
                const track = wrapper.querySelector('.carousel-track');
                const cards = track.children;
                const cardWidth = cards[0].offsetWidth + 20; // including gap
                const currentIndex = Math.round(Math.abs(getTranslateX(track)) / cardWidth);
                const state = carouselStates[carouselId];
                
                // Update the state to match current position
                state.currentIndex = Math.max(0, Math.min(currentIndex, cards.length - state.cardsVisible));
                
                // Update scroll indicator
                updateScrollIndicator(carouselId);
                updateNavigationButtons(carouselId);
            }

            // Helper function to get translateX value
            function getTranslateX(element) {
                const style = window.getComputedStyle(element);
                const matrix = style.transform || style.webkitTransform || style.mozTransform;
                if (matrix === 'none' || typeof matrix === 'undefined') {
                    return 0;
                }
                const matrixType = matrix.includes('3d') ? 'matrix3d' : 'matrix';
                const matrixValues = matrix.match(/matrix.*\((.+)\)/)[1].split(', ');
                return matrixType === 'matrix3d' ? parseFloat(matrixValues[12]) : parseFloat(matrixValues[4]);
            }

            // Mouse events for desktop
            wrapper.addEventListener('mousedown', (e) => {
                if (window.innerWidth > 768) {
                    isDown = true;
                    startX = e.pageX - wrapper.offsetLeft;
                    const track = wrapper.querySelector('.carousel-track');
                    scrollLeft = getTranslateX(track);
                    startTime = Date.now();
                    wrapper.style.cursor = 'grabbing';
                    e.preventDefault();
                }
            });

            wrapper.addEventListener('mouseleave', () => {
                if (isDown) {
                    updateScrollIndicatorFromScroll();
                }
                isDown = false;
                wrapper.style.cursor = 'grab';
            });

            wrapper.addEventListener('mouseup', () => {
                if (isDown) {
                    updateScrollIndicatorFromScroll();
                }
                isDown = false;
                wrapper.style.cursor = 'grab';
            });

            wrapper.addEventListener('mousemove', (e) => {
                if (!isDown || window.innerWidth <= 768) return;
                e.preventDefault();
                const x = e.pageX - wrapper.offsetLeft;
                const walk = (x - startX);
                const track = wrapper.querySelector('.carousel-track');
                const cards = track.children;
                const cardWidth = cards[0].offsetWidth + 20;
                const maxTranslate = -(cards.length - carouselStates[carouselId].cardsVisible) * cardWidth;
                
                const newTranslate = Math.max(maxTranslate, Math.min(0, scrollLeft + walk));
                track.style.transform = `translateX(${newTranslate}px)`;
                
                // Update scroll indicator in real-time
                const currentIndex = Math.round(Math.abs(newTranslate) / cardWidth);
                const state = carouselStates[carouselId];
                const maxIndex = Math.max(0, cards.length - state.cardsVisible);
                const progressPercentage = maxIndex > 0 ? (currentIndex / maxIndex) * 100 : 100;
                const progressBar = document.getElementById(index === 0 ? 'progress1' : 'progress2');
                progressBar.style.width = Math.min(100, Math.max(0, progressPercentage)) + '%';
                
                // Calculate velocity for momentum
                const currentTime = Date.now();
                velocity = walk / (currentTime - startTime);
                startTime = currentTime;
            });

            // Touch events for mobile
            wrapper.addEventListener('touchstart', (e) => {
                const track = wrapper.querySelector('.carousel-track');
                startX = e.touches[0].clientX;
                scrollLeft = getTranslateX(track);
                startTime = Date.now();
            }, { passive: true });

            wrapper.addEventListener('touchmove', (e) => {
                if (!startX) return;
                const x = e.touches[0].clientX;
                const walk = x - startX;
                const track = wrapper.querySelector('.carousel-track');
                const cards = track.children;
                const cardWidth = cards[0].offsetWidth + 20;
                const maxTranslate = -(cards.length - carouselStates[carouselId].cardsVisible) * cardWidth;
                
                const newTranslate = Math.max(maxTranslate, Math.min(0, scrollLeft + walk));
                track.style.transform = `translateX(${newTranslate}px)`;
                
                // Update scroll indicator in real-time
                const currentIndex = Math.round(Math.abs(newTranslate) / cardWidth);
                const state = carouselStates[carouselId];
                const maxIndex = Math.max(0, cards.length - state.cardsVisible);
                const progressPercentage = maxIndex > 0 ? (currentIndex / maxIndex) * 100 : 100;
                const progressBar = document.getElementById(index === 0 ? 'progress1' : 'progress2');
                progressBar.style.width = Math.min(100, Math.max(0, progressPercentage)) + '%';
                
                const currentTime = Date.now();
                velocity = walk / (currentTime - startTime);
                startTime = currentTime;
            }, { passive: true });

            wrapper.addEventListener('touchend', () => {
                if (startX !== null) {
                    updateScrollIndicatorFromScroll();
                }
                startX = null;
                
                // Add momentum scrolling
                if (Math.abs(velocity) > 0.5) {
                    const track = wrapper.querySelector('.carousel-track');
                    const currentTranslate = getTranslateX(track);
                    const momentum = velocity * 50;
                    const cards = track.children;
                    const cardWidth = cards[0].offsetWidth + 20;
                    const maxTranslate = -(cards.length - carouselStates[carouselId].cardsVisible) * cardWidth;
                    
                    const newTranslate = Math.max(maxTranslate, Math.min(0, currentTranslate + momentum));
                    track.style.transform = `translateX(${newTranslate}px)`;
                    
                    setTimeout(() => {
                        updateScrollIndicatorFromScroll();
                    }, 300);
                }
            }, { passive: true });

            // Update scroll indicator on scroll for native scrolling
            wrapper.addEventListener('scroll', () => {
                if (window.innerWidth <= 768) {
                    const maxScroll = wrapper.scrollWidth - wrapper.clientWidth;
                    const scrollPercentage = maxScroll > 0 ? (wrapper.scrollLeft / maxScroll) * 100 : 0;
                    const progressBar = document.getElementById(index === 0 ? 'progress1' : 'progress2');
                    progressBar.style.width = scrollPercentage + '%';
                }
            });

            // Set initial cursor
            if (window.innerWidth > 768) {
                wrapper.style.cursor = 'grab';
            }
        });
    </script>
</body>
</html>